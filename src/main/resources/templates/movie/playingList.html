<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>playing List</title>

    <style>
        /* 영화 카드 컨테이너 */
        .movie-container {
            display: flex;
            flex-wrap: wrap;       /* 화면 끝에서 줄바꿈 */
            gap: 16px;             /* 카드 사이 간격 */
            justify-content: center; /* 가운데 정렬 */
            align-items: stretch;  /* 같은 행의 카드 높이를 자동 맞춤 */
        }

        /* 각 영화 카드 */
        .movie-card {
            width: 200px;
            text-align: center;
            border: 1px solid #ccc;
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            overflow: hidden; /* 넘치는 건 숨김 */
        }

        /* 포스터 이미지 */
        .movie-card img {
            width: 100%;
            border-radius: 4px;
        }

        /* 제목 */
        .movie-card h2 {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis; /* 너무 긴 제목은 ... */
        }

        .pagination-container {
    display: flex;          /* 가로로 나열 */
    justify-content: center; /* 수평 가운데 정렬 */
    gap: 8px;               /* 페이지 사이 간격 */
    margin-top: 20px;       /* 위쪽 여백 */
    margin-bottom: 40px;    /* 하단 여백 */
}

.pagination-container a {
    padding: 5px 10px;
    text-decoration: none;
    border: 1px solid #ccc;
    border-radius: 4px;
    color: #333;
}

.pagination-container a.current {
    background-color: #007bff;
    color: white;
    border-color: #007bff;
}

    </style>
</head>
<body>
<div th:replace="~{/layout/header :: header}"></div>
<h1>상영중인 영화 목록</h1>
<a href="/home">홈으로 이동</a>

<!-- 정렬 선택 UI -->
<form method="get" action="">
    <label>
        <input type="text" name="movieName" placeholder="영화 제목 검색"> 제목
    </label>
    <label>
        <input type="radio" name="sort" value="popularity"
               th:checked="${sort == 'popularity'}"> 인기순
    </label>
    <label>
        <input type="radio" name="sort" value="releaseDate"
               th:checked="${param.sort == 'releaseDate'}">개봉일 순
    </label>
    <button type="submit">검색</button>
</form>

<div th:replace="~{/layout/movieList :: movieList}"></div>

<div class="pagination-container">
    <a th:href="@{/movie/playingList/{pageNumber}(pageNumber=${currentPage - 1}, sort=${param.sort}, movieName=${param.movieName})}"
       th:if="${currentPage > 1}">이전</a>

    <span th:text="${currentPage}">1</span>

    <a th:href="@{/movie/playingList/{pageNumber}(pageNumber=${currentPage + 1}, sort=${param.sort}, movieName=${param.movieName})}"
       th:if="${currentPage < totalPages}">다음</a>

</div>
</body>
</html>